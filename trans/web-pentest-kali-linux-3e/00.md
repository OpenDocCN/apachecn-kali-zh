# 零、前言

Web 应用，以及最近的 Web 服务，现在已经成为我们日常生活的一部分，从政府程序到社交媒体再到银行应用；它们甚至在通过使用 web 服务发送和接收信息的移动应用上。公司和人们通常每天过度使用 web 应用。这一事实本身就使得 web 应用成为信息窃贼和其他犯罪分子的诱人目标。因此，保护这些应用及其基础设施免受攻击对于开发人员和所有者来说至关重要。

近几个月来，全世界都有关于大规模数据泄露、滥用应用功能生成错误信息或收集用户信息的新闻，这些信息随后被出售给广告公司。人们开始更加关心他们的信息是如何被信任的公司使用和保护的。因此，公司需要采取积极行动，防止此类泄漏或攻击的发生。这是在许多方面进行的，从开发过程中更严格的质量控制到公关，以及在检测到事件时管理媒体的存在。

由于当前方法的开发周期更短、更具动态性，因此创建现代 web 应用需要增加多种技术的复杂性。此外，一些继承下来的不良做法开发人员无法从安全角度全面测试他们的 web 应用，因为他们的首要任务是按时交付工作产品。web 应用和开发过程本身的复杂性使得需要一名专门从事安全测试的专业人员，该专业人员参与该过程，并负责从安全角度（更具体地说，从攻击者的角度）对应用进行测试。该专业人员是渗透测试人员。

在本书中，我们从 web 应用和渗透测试的基本概念出发，涵盖了方法学的每个阶段；从获取信息到识别可能的弱点，再到利用漏洞。渗透测试人员的一项关键任务是：一旦他们发现并验证漏洞，他们需要向开发人员建议如何修复此类缺陷并防止其再次出现。因此，本书中专门用于识别和利用漏洞的所有章节还包括一节，简要介绍如何预防和缓解每种此类攻击。

# 这本书是给谁的

我们写这本书时考虑了几种读者。首先是计算机科学专业的学生、开发人员和系统管理员，他们希望在信息安全方面的知识上更上一层楼，或者希望在这一领域从事职业；这些将找到一些基本概念和易于遵循的说明，这将使他们能够在自己的测试实验室进行第一次渗透测试，并获得继续实践和学习的基础和工具。

应用开发人员和系统管理员还将了解攻击者在现实世界中的行为，构建更安全的应用和系统应考虑哪些方面，以及如何检测恶意行为。

最后，经验丰富的安全专业人员将发现一些中级和高级利用技术以及如何组合两个或多个漏洞以执行更复杂的攻击的想法。

# 这本书涵盖的内容

[第一章](01.html#K0RQ0-d48f8b63a8cc440fbc92835fec01cc38)*渗透测试和 Web 应用简介*，介绍渗透测试、Kali Linux 和 Web 应用的基本概念。它首先从渗透测试本身和其他关键概念的定义开始，然后是在进行专业渗透测试之前需要考虑的事项，例如定义范围和参与规则。然后我们深入研究 Kali Linux，了解 web 应用是如何工作的，重点关注与渗透测试人员更相关的方面。

[第 2 章](02.html#22O7C0-d48f8b63a8cc440fbc92835fec01cc38)*使用 Kali Linux*建立您的实验室，是对测试环境的技术审查，将在其余章节中使用。我们首先解释什么是 Kali Linux 以及它包含的用于测试 web 应用安全性的工具；接下来，我们将介绍易受攻击的 web 应用，这些应用将在以后的章节中用于演示这些漏洞和攻击。

[第 3 章](03.html#37UDA0-d48f8b63a8cc440fbc92835fec01cc38)*侦察和分析 Web 服务器*展示了渗透测试人员和攻击者使用的技术和工具，以获取用于开发、托管和支持目标应用的技术信息，并确定可能被进一步利用的第一个弱点，因为，按照渗透测试的标准方法，第一步是收集尽可能多的目标信息。

[第 4 章](04.html#4REBM0-d48f8b63a8cc440fbc92835fec01cc38)、*认证和会话管理漏洞*顾名思义，致力于检测、利用和缓解与用户身份识别和应用内职责分离相关的漏洞，首先解释不同的认证和会话管理机制，然后介绍这些机制如何存在设计或实现缺陷，以及恶意参与者或渗透测试人员如何利用这些缺陷。

[第 5 章](05.html#5SQFC0-d48f8b63a8cc440fbc92835fec01cc38)*检测和利用基于注入的缺陷*解释了最常见注入缺陷的检测、利用和缓解，因为开发人员在安全性方面最关心的问题之一是他们的应用容易受到任何注入攻击，无论是 SQL 注入，命令注入或任何其他攻击都可能对 web 应用造成重大风险。

[第 6 章](06.html#6QCGQ0-d48f8b63a8cc440fbc92835fec01cc38)*发现和利用跨站点脚本（XSS）漏洞*从解释什么是跨站点脚本漏洞，到它如何以及为什么会造成安全风险，到如何识别 web 应用何时易受攻击，以及攻击者如何利用它从用户处获取敏感信息或使他们在不知不觉中执行操作。

[第 7 章](07.html#79KPQ0-d48f8b63a8cc440fbc92835fec01cc38)、*跨站点请求伪造、识别和利用*解释了什么是跨站点请求伪造攻击以及如何进行跨站点请求伪造攻击。然后，我们讨论了检测导致它的缺陷的关键因素，然后是开发技术，最后是预防和缓解建议。

[第 8 章](08.html#7H8UA0-d48f8b63a8cc440fbc92835fec01cc38)*攻击加密实现中的缺陷*首先介绍从渗透测试人员的角度来看有用的加密概念，例如 SSL/TLS 的总体工作原理、加密概念和算法的回顾以及编码和哈希；然后，我们描述了用于识别弱 SSL/TLS 实现的工具，以及对已知漏洞的利用。接下来，我们将介绍自定义密码算法和实现中缺陷的检测和利用。在本章结束时，我们给出了如何在使用加密通信或存储敏感信息时防止漏洞的建议。

[第 9 章](09.html#8GO0S0-d48f8b63a8cc440fbc92835fec01cc38)*AJAX、HTML5 和客户端攻击*介绍了渗透测试 web 应用的客户端，从 AJAX 应用的爬网过程开始，并解释了现代 web 浏览器中包含的开发工具。我们还将关注 HTML5 带来的创新，以及它给攻击者和渗透测试人员带来的新挑战和机遇。接下来，将有一节介绍如何使用开发人员工具绕过客户端实现的安全控制，本章最后给出了针对 AJAX、HTML5 和客户端漏洞的预防和缓解建议。

[第 10 章](10.html#9DBHO0-d48f8b63a8cc440fbc92835fec01cc38)、*Web 应用中的其他常见安全漏洞*，讨论了不安全的直接对象引用、文件包含、HTTP 参数污染、信息泄露漏洞及其利用。最后，我们就如何预防和补救这些缺陷提出了建议。

[第 11 章](11.html#9RLA60-d48f8b63a8cc440fbc92835fec01cc38)*在 Web 应用上使用自动扫描器*解释了在 Web 应用上使用自动扫描器和模糊器时应考虑的因素。我们还解释了这些扫描器是如何工作的，以及什么是模糊化，然后是 Kali Linux 中包含的扫描和模糊化工具的使用示例。我们总结了渗透测试人员在对 web 应用执行自动扫描后应该采取的行动，以便为应用的开发人员提供有价值的结果。

# 充分利用这本书

为了成功地利用本书，建议读者对以下主题有一个基本的了解：

*   Linux 操作系统安装
*   Unix/Linux 命令行用法
*   HTML 语言
*   PHP web 应用编程
*   Python 编程

唯一需要的硬件是个人计算机，其操作系统能够运行 VirtualBox 或其他虚拟化软件。至于规格，建议的设置如下：

*   英特尔 i5、i7 或类似的 CPU
*   硬盘上有 500 GB
*   8 GB 内存
*   因特网连接

# 下载示例代码文件

您可以从您的账户[www.packtpub.com](http://www.packtpub.com)下载本书的示例代码文件。如果您在其他地方购买了本书，您可以访问[www.packtpub.com/support](http://www.packtpub.com/support)并注册，将文件通过电子邮件直接发送给您。

您可以通过以下步骤下载代码文件：

1.  登录或注册[www.packtpub.com](http://www.packtpub.com/support)。
2.  选择“支持”选项卡。
3.  点击代码下载和勘误表。
4.  在搜索框中输入图书名称，然后按照屏幕上的说明进行操作。

下载文件后，请确保使用以下最新版本解压或解压缩文件夹：

*   WinRAR/7-Zip for Windows
*   适用于 Mac 的 Zipeg/iZip/UnRarX
*   适用于 Linux 的 7-Zip/PeaZip

该书的代码包也托管在 GitHub 上的[https://github.com/PacktPublishing/Web-Penetration-Testing-with-Kali-Linux-Third-Edition](https://github.com/PacktPublishing/Web-Penetration-Testing-with-Kali-Linux-Third-Edition) 。如果代码有更新，它将在现有 GitHub 存储库中更新。

我们的丰富书籍和视频目录中还有其他代码包，请访问**[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/)** 。看看他们！

# 下载彩色图像

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[http://www.packtpub.com/sites/default/files/downloads/WebPenetrationTestingwithKaliLinuxThirdEdition_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/WebPenetrationTestingwithKaliLinuxThirdEdition_ColorImages.pdf) 。

# 使用的惯例

本书中使用了许多文本约定。

`CodeInText`：表示文本中的码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。下面是一个示例：“许多组织可能有应用将在不属于`nmap-services`文件的端口上侦听。”

代码块设置如下：

```
<?php 
  if(!empty($_GET['k'])) { 
    $file = fopen('keys.txt', 'a'); 
    fwrite($file, $_GET['k']); 
    fclose($file); 
  } 
?> 
```

当我们希望提请您注意代码块的特定部分时，相关行或项目以粗体显示：

```
<?php 
  if(!empty($_GET['k'])) { 
    $file = fopen('keys.txt', 'a'); 
    fwrite($file, $_GET['k']); 
    fclose($file); 
  } 
?> 
```

任何命令行输入或输出的编写方式如下：

```
python -m SimpleHttpServer 8000  
```

**粗体**：表示一个新术语、一个重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词出现在文本中，如下所示。下面是一个示例：“如果您转到当前浏览器中的“日志”选项卡，您将看到钩子记录用户在浏览器中执行的所有操作，从单击和击键到窗口或选项卡的更改。”

警告或重要提示如下所示。

提示和技巧如下所示。

# 联系

我们欢迎读者的反馈。

**一般反馈**：发送电子邮件`feedback@packtpub.com`并在邮件主题中提及书名。如果您对本书的任何方面有疑问，请发送电子邮件至`questions@packtpub.com`。

**勘误表**：尽管我们已尽一切努力确保内容的准确性，但还是会出现错误。如果您在本书中发现错误，如果您能向我们报告，我们将不胜感激。请访问[www.packtpub.com/submit-errata](http://www.packtpub.com/submit-errata)，选择您的书籍，点击 errata 提交表单链接，然后输入详细信息。

**盗版**：如果您在互联网上发现我们作品的任何形式的非法复制品，请您提供我们的位置地址或网站名称，我们将不胜感激。请通过`copyright@packtpub.com`与我们联系，并提供该材料的链接。

**如果您有兴趣成为一名作家**：如果您对某个主题有专业知识，并且您有兴趣撰写或贡献一本书，请访问[authors.packtpub.com](http://authors.packtpub.com/)。

# 评论

请留下评论。一旦你阅读并使用了这本书，为什么不在你购买它的网站上留下评论呢？然后，潜在读者可以看到并使用您的无偏见意见做出购买决定，我们 Packt 可以了解您对我们产品的看法，我们的作者可以看到您对他们书籍的反馈。非常感谢。

有关 Packt 的更多信息，请访问[packtpub.com](https://www.packtpub.com/)。